{% load static %}

<!doctype html>
<html lang="en">
  <head>

    {% block meta %}
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
    {% endblock %}

    {% block extra_meta %}
    {% endblock %}

    {% block corecss %}
        <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"> -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
        <link href="https://fonts.googleapis.com/css2?family=Jura:wght@300..700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="{% static 'css/base.css' %}">
        <link rel="stylesheet" href="{% static 'css/style.css' %}">
    {% endblock %}

    {% block extra_css %}
    {% endblock %}

    {% block corejs %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <!-- Stripe -->
        <script src="https://js.stripe.com/v3/"></script>
    {% endblock %}

    {% block extra_js %}
    {% endblock %}

    <title>Zit Mall{% block extra_title %}{% endblock %}</title>
  </head>
  <body>
    <header class="">
            <nav class="navbar navbar-expand-sm navbar-danger py-2 bg-light base-nav">
                <div class="container-fluid mx-auto">
                    <a href="{% url 'home' %}"><h1><img class="h1" src="https://res.cloudinary.com/djhi60enx/image/upload/v1714657570/zitmall-shopping-logo_j6yges.png" alt="zitmall-logo"></h1></a>
                    <!-- <h1><img class="h1" src="https://res.cloudinary.com/djhi60enx/image/upload/v1714657835/zitmall-shopping_siipch.png" alt="zitmall-logo"></h1> -->
                    <form method="GET" action="{% url 'products' %}" role="search">
                        <input class="form-control" type="search" name="q" placeholder="What are you looking for?" aria-label="Search">
                    </form>
                    <div>
                        <button
                            class="navbar-toggler"
                            type="button"
                            data-bs-toggle="collapse"
                            data-bs-target="#navprofilemenu"
                            aria-label="user-menu">
                            <i class="bi bi-person"></i>
                        </button>
                    
                        <a href="{% url 'view_cart' %}" class="text-decoration-none navbar-toggler" aria-label="shopping-bag">
                            <button type="button" class="btn btn-link">
                                <i class="bi bi-cart4"><sup class="small text-primary">
                                    {% if product_count == 0 %}{% else %}{{ product_count }}{% endif %}                                    
                                </sup></i>
                                <small>
                                    {% if grand_total %}
                                        ${{ grand_total|floatformat:2 }}
                                    {% else %}
                                        $0.00
                                    {% endif %}
                                </small>
                            </button>
                        </a>
                    </div>
                        
                    <div class="collapse navbar-collapse" id="navprofilemenu">
                            <ul class="navbar-nav">
                                
                                                            
                                
                                {% if user.is_authenticated %}
                                <li class="nav-item">
                                    <a class="nav-link {% if request.path == member_area_url %}active" aria-current="page{% endif %}" href="{% url 'add_product' %}" aria-label="Product-management"><i class="bi-box"></i> Product Management</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link {% if request.path == member_area_url %}active" aria-current="page{% endif %}" href="{% url 'profile_view' %}" aria-label="profile"><i class="bi-person"></i> {{ user }}</a>
                                </li>                                
                                <li class="nav-item">
                                    <a class="nav-link {% if request.path == login_url %}active" aria-current="page{% endif %}" href="{% url 'view_cart' %}" aria-label="logout">
                                        <i class="bi-cart4"><sup class="small text-primary">{% if product_count == 0 %}{% else %}{{ product_count }}{% endif %}</sup></i>
                                        <small>{% if grand_total %}${{ grand_total|floatformat:2 }}{% else %}$0.00{% endif %}</small></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link {% if request.path == login_url %}active" aria-current="page{% endif %}" href="{% url 'account_logout' %}" aria-label="logout"><i class="bi-key"></i> Logout</a>
                                </li>
                                {% else %}
                                <li class="nav-item">
                                    <a class="nav-link {% if request.path == registration_url %}active" aria-current="page{% endif %}" href="{% url 'account_signup' %}" aria-label="signup">Register</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link {% if request.path == logout_url %}active" aria-current="page{% endif %}" href="{% url 'account_login' %}" aria-label="login">Log In</a>
                                </li>
                                {% endif %}
                                
                            </ul>
                            
                    </div>
                </div>
            </nav>
            {% include 'includes/categories.html' %}
            <!-- <nav class="navbar navbar-expand-sm navbar-primary py-2 bg-white base-nav"> -->
            
            <!-- displaying Django messages -->
            <div class="bg-dark py-0 my-0">
                <div class="container">
                    {% for message in messages %}
                    <div class="alert {{ message.tags }} alert-dismissible
                    fade show text-info text-center text-wrap my-0 py-0" id="msg" role="alert">
                    <em>{{ message | safe }}</em>
                    <button type="button" class="btn btn-outline-warning btn-sm rounded-circle"
                            data-bs-dismiss="alert" aria-label="Close">x</button>
                    {% endfor %}
                </div>
            </div>

        
        </header>
        {% if messages %}
        <div class="message-container ">
            {% for message in messages %}
                {% with message.level as level %}
                    {% if level == 40 %}
                        {% include 'includes/toasts/toast_error.html' %}
                    {% elif level == 30 %}
                        {% include 'includes/toasts/toast_warning.html' %}
                    {% elif level == 25 %}
                        {% include 'includes/toasts/toast_success.html' %}
                    {% else %}
                        <p>testing</p>
                        {% include 'includes/toasts/toast_info.html' %}
                    {% endif %}
                {% endwith %}
            {% endfor %}
        </div>
      {% endif %}

        <main class="bottom-footer">
            {% block content %}
            {% endblock %}
        </main>

        <footer class="footer mt-auto text-center">
              <span class="text-muted">Copyright &copy; 2024 Zitmall</span>
        </footer>

        

        {% block postloadjs %}
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script type="text/javascript">
            $('.toast').toast('show');
        </script>
        {% endblock %}

    
    </body>
</html>